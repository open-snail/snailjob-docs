---
title: æœåŠ¡éƒ¨ç½²
date: 2023-07-06 19:02:54
permalink: /pages/406a66/
---

## <EasyRetryIcon iconType='icon-shipin' /> è§†é¢‘æ•™ç¨‹
[ä»0åˆ°1å¿«é€Ÿäº†è§£åˆ†å¸ƒå¼é‡è¯•ç»„ä»¶EasyRetry -ã€å®‰è£…éƒ¨ç½²ã€‘](https://www.ixigua.com/i7270180938343154213/)

## é…ç½®éƒ¨ç½²æœåŠ¡ç«¯è°ƒåº¦å¹³å°
### åˆå§‹åŒ–æ•°æ®åº“
æ•°æ®åº“è„šæœ¬ä½ç½®
```
# mysqlã€mariadb
doc/sql/easy_retry_mysql.sql
# postgres
doc/sql/easy_retry_postgre.sql
```

### ç³»ç»Ÿé…ç½®

<code-group>
  <code-block title="mysql æ•°æ®æº" active>

```yaml
# é…ç½®æ•°æ®æº
spring:
  datasource:
    name: easy_retry
    url:  jdbc:mysql://localhost:3306/easy_retry?useSSL=false&characterEncoding=utf8&useUnicode=true
    username: root
    password: root
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      connection-timeout: 30000
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      pool-name: easy_retry
      max-lifetime: 1800000
      connection-test-query: SELECT 1
    ....å…¶ä»–é…ç½®ä¿¡æ¯....
# å½“å‰ä½¿ç”¨çš„æ•°æ®åº“
easy-retry:
  # ....å…¶ä»–é…ç½®ä¿¡æ¯è¯·çœ‹'æœåŠ¡ç«¯é…ç½®ä¿¡æ¯'....
  db-type: mysql #å½“å‰ä½¿ç”¨çš„æ•°æ®åº“
```
  </code-block>

  <code-block title="mariadb æ•°æ®æº">

```yaml
# é…ç½®æ•°æ®æº
spring:
  datasource:
    name: easy_retry
    url: jdbc:mariadb://localhost:3307/easy_retry
    username: root
    password: root
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: org.mariadb.jdbc.Driver
    hikari:
      connection-timeout: 30000
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      pool-name: easy_retry
      max-lifetime: 1800000
      connection-test-query: SELECT 1
  # ....å…¶ä»–é…ç½®ä¿¡æ¯....
# å½“å‰ä½¿ç”¨çš„æ•°æ®åº“
easy-retry:
  # ....å…¶ä»–é…ç½®ä¿¡æ¯è¯·çœ‹'æœåŠ¡ç«¯é…ç½®ä¿¡æ¯'....
  db-type: mariadb #å½“å‰ä½¿ç”¨çš„æ•°æ®åº“
```
  </code-block>
<code-block title="postgres æ•°æ®æº">

```yaml
# é…ç½®æ•°æ®æº
spring:
  datasource:
    name: easy_retry
    url: jdbc:postgresql://localhost:5432/easy_retry
    username: postgres
    password: root
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 30000
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      pool-name: easy_retry
      max-lifetime: 1800000
      connection-test-query: SELECT 1
   #....å…¶ä»–é…ç½®ä¿¡æ¯....
# å½“å‰ä½¿ç”¨çš„æ•°æ®åº“
easy-retry:
  # ....å…¶ä»–é…ç½®ä¿¡æ¯è¯·çœ‹'æœåŠ¡ç«¯é…ç½®ä¿¡æ¯'....
  db-type: postgres #å½“å‰ä½¿ç”¨çš„æ•°æ®åº“
```
  </code-block>

</code-group>


## é¡¹ç›®éƒ¨ç½²
### ä¸‹è½½æºç éƒ¨ç½²
- ä¸‹è½½æºç 
  ```
   https://gitee.com/aizuda/easy-retry.git
   æˆ–
   https://github.com/aizuda/easy-retry.git
  ```

- maven æ‰“åŒ…é•œåƒ
```
maven clean install
```

- ä¿®æ”¹é…ç½®
```
/easy-retry-server/src/main/resources/application.yml
```

- å¯åŠ¨
```
java -jar easy-retry-server.jar
```

### docker éƒ¨ç½²
- ä¸‹è½½é•œåƒ
```
docker pull byteblogs/easy-retry:{Latest Version}
```

- åˆ›å»ºå®¹å™¨å¹¶è¿è¡Œ
::: warning ğŸŒˆç‰¹åˆ«è¯´æ˜
å¦‚éœ€è‡ªå®šä¹‰ mysql ç­‰é…ç½®ï¼Œå¯é€šè¿‡ "-e PARAMS" æŒ‡å®šï¼Œå‚æ•°æ ¼å¼ PARAMS="--key1=value1  --key2=value2" ï¼›
é…ç½®é¡¹å‚è€ƒæ–‡ä»¶ï¼š/easy-retry-server/src/main/resources/application.yml
å¦‚éœ€è‡ªå®šä¹‰ JVMå†…å­˜å‚æ•° ç­‰é…ç½®ï¼Œå¯é€šè¿‡ "-e JAVA_OPTS" æŒ‡å®šï¼Œå‚æ•°æ ¼å¼ JAVA_OPTS="-Xmx512m" ï¼›
:::

<code-group>
  <code-block title="mysql æ•°æ®æº" active>

``` shell
docker run  -e PARAMS="--easy-retry.db-type=mysql  --spring.datasource.username=root --spring.datasource.password=root  --spring.datasource.url=jdbc:mysql://IP:3306/easy_retry?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&serverTimezone=Asia/Shanghai --spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver" -p 8080:8080 -p 1788:1788 --name easy-retry-server-mysql -d byteblogs/easy-retry:{Latest Version}
```
  </code-block>

  <code-block title="mariadb æ•°æ®æº">

```shell
docker run  -e PARAMS="--easy-retry.db-type=mariadb  --spring.datasource.username=root --spring.datasource.password=root  --spring.datasource.url=jdbc:mariadb://IP:3307/easy_retry --spring.datasource.driver-class-name=org.mariadb.jdbc.Driver" -p 8080:8080 -p 1788:1788 --name easy-retry-server-mariadb -d byteblogs/easy-retry:{Latest Version}
```
  </code-block>

  <code-block title="postgres æ•°æ®æº">

```shell
docker run  -e PARAMS="--easy-retry.db-type=postgres  --spring.datasource.username=postgres --spring.datasource.password=root  --spring.datasource.url=jdbc:postgresql://IP:5432/easy_retry --spring.datasource.driver-class-name= org.postgresql.Driver" -p 8080:8080 -p 1788:1788 --name easy-retry-server-postgres -d byteblogs/easy-retry{Latest Version}
```
  </code-block>
</code-group>


å¦‚æœä½ å·²ç»æ­£ç¡®å¯åŠ¨ç³»ç»Ÿäº†ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¾“å…¥ä»¥ä¸‹åœ°å€å°±å¯ä»¥è¿›å…¥ç®¡ç†ç³»ç»Ÿäº†
```
http://localhost:8080
```

## [å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢](https://gitee.com/aizuda/easy-retry-docs/blob/master/docs/01.%E6%8C%87%E5%8D%97/01.%E6%8C%87%E5%8D%97/02.%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.md)
